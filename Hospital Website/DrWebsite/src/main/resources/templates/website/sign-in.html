<!DOCTYPE html>
<html>
<head th:replace="website/common/layout :: header-link"></head>
<body>
<div th:replace="website/common/layout :: navbar"></div>
 <!-- Start main-content -->
  <div class="main-content">
    <!-- Section: inner-header -->
    <section class="inner-header divider parallax layer-overlay overlay-white-8" data-bg-img="/website/assets/images/bg/bg6.jpg">
      <div class="container pt-60 pb-60">
        <!-- Section Content -->
        <div class="section-content">
          <div class="row">
            <div class="col-md-12 text-center">
              <h2 class="title">Login/Register</h2>
              <ol class="breadcrumb text-center text-black mt-10">
                <li><a href="#">Home</a></li>
                <li class="active text-theme-colored">Login/Register</li>
              </ol>
            </div>
          </div>
        </div>
      </div>      
    </section>

    <section>
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
          <div th:if="${msg}" class="alert alert-card alert-success" role="alert" id="msg">
          	<span th:text="${msg}"></span>
				  <button class="close" type="button" data-dismiss="alert" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
			      </button>
		  </div>
		  <div th:if="${error}" class="alert alert-card alert-danger" role="alert" id="msg">
			<span th:text="${error}"></span>
				<button class="close" type="button" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span></button>
		 </div>
            <ul class="nav nav-tabs">
              <li class="active"><a href="#login-tab" data-toggle="tab">Login</a></li>
              <li><a href="#register-tab" data-toggle="tab">Register</a></li>
            </ul>
             
            <div class="tab-content">
              <div class="tab-pane fade in active p-15" id="login-tab">
                <h4 class="text-gray mt-0 pt-5"> Login</h4>
               <hr>
                <form name="login-form" class="clearfix" action="/user-sign-in" method="POST">
                  <div class="row">
                    <div class="form-group col-md-12">
                      <label for="form_username_email">Email</label>
                      <input id="form_username_email" name="email" class="form-control" type="text" 
                      pattern="[a-zA-Z0-9]{1}[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$"
										title=""
										oninvalid="this.setCustomValidity('valid email required')"
										oninput="setCustomValidity('')" required >
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group col-md-12">
                      <label for="form_password">Password</label>
                      <input id="form_password" name="password" required class="form-control" type="password"
                       pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
										title="Must contain at least 1 number, 1 special character, 1 uppercase and length at least 8 or more characters ex: Abcd@123"
										>
                    </div>
                  </div>
                  
          
                  <div class="clear text-center pt-10">
                    <a class="text-theme-colored font-weight-600 font-12" href="#">Forgot Your Password?</a>
                  </div>
                  <div class="clear text-center pt-10">
                    <button type="submit" class="btn btn-dark btn-lg btn-block no-border" data-bg-color="#00acee">Login</button>
                  </div>
                </form>
              </div>
              <div class="tab-pane fade in p-15" id="register-tab">
             
                <form name="reg-form" id="register" class="register-form" >
                  <div class="icon-box mb-0 p-0">
                    <a href="#" class="icon icon-bordered icon-rounded icon-sm pull-left mb-0 mr-10">
                      <i class="pe-7s-users"></i>
                    </a>
                    <h4 class="text-gray pt-10 mt-0 mb-30">Don't have an Account? Register Now.</h4>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="form-group col-md-12">
                      <label>Name</label>
                      <input name="name" pattern="[a-zA-Z\s]+" title="only alphabets and space allowed"
					  required class="form-control" type="text">
                    </div>
                  </div>
                  
                  <div class="row">
                  	<div class="form-group col-md-6">
                     	<label>Email</label>
                      <input name="email" pattern="[a-zA-Z0-9]{1}[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$"
										title=""
										oninvalid="this.setCustomValidity('valid email required')"
										oninput="setCustomValidity('')" required class="form-control" type="text">
                    </div>
                    	<div class="form-group col-md-6">
                     	<label>Phone</label>
                      <input name="phone" required class="form-control"
                      pattern="[6-9]{1}[0-9]{9}" maxlength="10"
										title="Enter number only required 10 digit"  type="text">
                    </div>
                  </div>
                  
                  <div class="row">
                    <div class="form-group col-md-6">
                      <label for="form_choose_password">Enter Password</label>
                      <input id="password" class="form-control" type="text"
                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
										title="Must contain at least 1 number, 1 special character, 1 uppercase and length at least 8 or more characters ex: Abcd@123"
										required>
                    </div>
                    <div class="form-group col-md-6">
                      <label>Re-enter Password</label>
                      <input id="form_re_enter_password" name="password"  class="form-control" type="text"
                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
										title="Must contain at least 1 number, 1 special character, 1 uppercase and length at least 8 or more characters ex: Abcd@123"
										required>
                    </div>
                  </div>
                  <div class="form-group">
                    <button class="btn btn-dark btn-lg btn-block mt-15 submit" type="submit">Register Now</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  <!-- end main-content -->



<div th:replace="website/common/layout :: footer"></div>
<div th:replace="website/common/layout :: footer-link"></div>
</body>
<script>
$(document).on('submit', '#register', function(e) {
    e.preventDefault();
    $.ajax({
        type: "ajax",
        method: "POST",
        url: "/user-registration",
        data: new FormData(this),
        processData: false,
        contentType: false,
        cache: false,
        beforeSend: function() {
            $(".submit").prop('disabled', true);
        },

        success: function(data) {      	
            $(".submit").prop('disabled', false);            
           
            if(data.status != "true")
            {
            	alert(data.message)
            }
            else
            {
            	alert(data.message)
            	$('#register')[0].reset();
            	window.location = "/login"
            }
          
           
        },
        error: function() {
            alert('could not insert');
        }
    });
});
</script>
</html>